define(function(t,e,n){!function(t,e){"object"==typeof n&&"object"==typeof n.exports?n.exports=e():t.BootstrapDialog=e()}("undefined"!=typeof window?window:this,function(){var t={type:{DEFAULT:"default",PRIMARY:"primary",INFO:"info",SUCCESS:"success",WARNING:"warning",DANGER:"danger",LINK:"link",MUTED:"muted"},buttonCategory:{BUTTON:"button",SUBMIT:"submit",RESET:"reset"},buttonSize:{NORMAL:"",LARGE:"btn-lg",SMALL:"btn-sm",MINI:"btn-xs"}};return function(t,e){t.bsButton=e()}(t,function(){var e=t||{},n=Backbone.View.extend({tagName:"button",className:"btn",iconTemplate:function(t){return _.isEmpty(t)?"":_.template('<i class="<%-cls%>" aria-hidden="true"></i> ')({cls:t})},initialize:function(t){var n={cssClass:"",label:"OK",icon:"",type:e.type.DEFAULT,category:e.buttonCategory.BUTTON,size:e.buttonSize.NORMAL,block:!1,disabled:!1,preventDefault:!1,state:{loading:"loading..."},context:null,action:null};t=_.extend({},n,t);var o=$(this.el);o.attr("type",t.category).append(this.iconTemplate(t.icon)).append(t.label).addClass(["btn-"+t.type,t.size,t.cssClass,t.block?"btn-block":"",t.disabled?"disabled":""].join(" ")),_.each(t.state,function(t,e){o.data(e+"-text",t)}),this.context=t.context,this.onClick=t.action,this.preventDefault=t.preventDefault,this.state=t.state},events:{click:"_onClick"},_onClick:function(t){return _.isFunction(this.onClick)&&this.onClick(this,this.context),this.preventDefault?!1:void 0},active:function(t){var e=$(this.el);return t===!0?e.addClass("active"):e.removeClass("active"),this},disable:function(){var t="disabled";return $(this.el).addClass(t).attr(t,t),this},enable:function(){var t="disabled";return $(this.el).removeClass(t).removeAttr(t),this},setState:function(t){return(_.isEmpty(t)||"loading"!=t&&!_.has(this.state,t.toLowerCase()))&&(t="reset"),$(this.el).button(t),this},loading:function(){return this.setState("loading")},reset:function(){return this.setState("reset")}});return{create:function(t){return new n(t)},extend:function(t){return n.extend(t)}}}),function(t,e){t.bsModal=e()}(t,function(){var e=t||{},n=Backbone.View.extend({tagName:"div",className:"modal fade",_isOpened:!1,initialize:function(t){var n=this,o="ModalLabel_"+this.cid,a={title:"Title",message:"",type:e.type.DEFAULT,buttons:[{label:"Close",type:e.type.DEFAULT,action:function(t,e){e.close()}}],backdrop:!0,keyboard:!0,autodestroy:!0,width:"",cssClass:"",onShow:null,onShown:null,onHide:null,onHidden:null,onLoaded:null};e.modalOptions=_.extend({},a,t);var i={main:'<div class="modal-dialog" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="<%-labelledby%>"><div class="modal-content"></div></div>',header:'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="<%-labelledby%>"><%-title%></h4></div>',body:'<div class="modal-body"></div>',footer:'<div class="modal-footer"></div>'},s=$(this.el),l=$(_.template(i.main)({labelledby:o})).addClass(e.modalOptions.cssClass).appendTo(s);e.modalOptions.width&&l.css({width:e.modalOptions.width,"margin-left":"auto","margin-right":"auto"});var d=s.find(".modal-content").css({border:"0"});this._header=$(_.template(i.header)({labelledby:o,title:e.modalOptions.title})).addClass("bg-"+e.modalOptions.type).css({"border-radius":"5px 5px 0 0"}).appendTo(d),this._title=this._header.find(".modal-title"),this._body=$(i.body).css({overflow:"hidden"}).html(e.modalOptions.message).appendTo(d),this._footer=$(i.footer).appendTo(d),this._buttons=[],_.each(e.modalOptions.buttons,function(t){t.context=n,t.type=t.type||e.modalOptions.type;var o=e.bsButton.create(t);n._footer.append(o.el),n._buttons.push(o)})},events:{"show.bs.modal":"_onShow","shown.bs.modal":"_onShown","hide.bs.modal":"_onHide","hidden.bs.modal":"_onHidden","loaded.bs.modal":"_onLoaded"},_onShow:function(){_.isFunction(e.modalOptions.onShow)&&e.modalOptions.onShow(this)},_onShown:function(){_.isFunction(e.modalOptions.onShown)&&e.modalOptions.onShown(this)},_onHide:function(){_.isFunction(e.modalOptions.onHide)&&e.modalOptions.onHide(this)},_onHidden:function(){_.isFunction(e.modalOptions.onHidden)&&e.modalOptions.onHidden(this),e.modalOptions.autodestroy===!0&&this.remove()},_onLoaded:function(){_.isFunction(e.modalOptions.onLoaded)&&e.modalOptions.onLoaded(this)},open:function(){return this._isOpened||($("body").append(this.el),$(this.el).modal({show:!0,backdrop:e.modalOptions.backdrop===!0?!0:"static",keyboard:e.modalOptions.keyboard}),this._isOpened=!0),this},close:function(){return $(this.el).modal("hide"),this._isOpened=!1,this},setTitle:function(t){return this._title.text(t),this},getTitle:function(){return this._title.text()},setMessage:function(t){return this._body.html(t),this},getModalTitle:function(){return this._title},getModalHeader:function(){return this._header},getModalBody:function(){return this._body},getModalFooter:function(){return this._footer},getButtonList:function(){return this._buttons}});return{create:function(t){return new n(t)},extend:function(t){return n.extend(t)},alert:function(){var t={title:"Alert",message:"",type:e.type.PRIMARY,buttonLabel:"OK",callback:null},n=_.isObject(arguments[0])?arguments[0]:{};n=_.isString(arguments[0])?{message:arguments[0],title:_.isString(arguments[1])?arguments[1]:t.title,callback:_.isFunction(arguments[1])?arguments[1]:_.isFunction(arguments[2])?arguments[2]:null}:n;var o=_.extend({},t,n);return this.create({title:o.title,message:o.message,type:o.type,backdrop:!1,width:"360px",buttons:[{label:o.buttonLabel,action:function(t,e){_.isFunction(o.callback)&&o.callback(),e.close()}}]}).open()},confirm:function(){var t={title:"Confirm",message:"",type:e.type.PRIMARY,okLabel:"Yes",cancelLabel:"No",callback:null},n=_.isObject(arguments[0])?arguments[0]:{};n=_.isString(arguments[0])?{message:arguments[0],title:_.isString(arguments[1])?arguments[1]:t.title,callback:_.isFunction(arguments[1])?arguments[1]:_.isFunction(arguments[2])?arguments[2]:null}:n;var o=_.extend({},t,n);return this.create({title:o.title,message:o.message,type:o.type,width:"360px",buttons:[{label:o.okLabel,action:function(t,e){_.isFunction(o.callback)&&o.callback(!0),e.close()}},{label:o.cancelLabel,type:e.type.DEFAULT,action:function(t,e){_.isFunction(o.callback)&&o.callback(!1),e.close()}}]}).open()},prompt:function(){var t={title:"Input Content",type:e.type.PRIMARY,content:"",okLabel:"OK",cancelLabel:"CANCEL",callback:null},n=_.isFunction(arguments[0])?{callback:arguments[0]}:_.isObject(arguments[0])?arguments[0]:{};n=_.isString(arguments[0])?{content:arguments[0],title:_.isString(arguments[1])?arguments[1]:t.title,callback:_.isFunction(arguments[1])?arguments[1]:_.isFunction(arguments[2])?arguments[2]:null}:n;var o=_.extend({},t,n);return this.create({title:o.title,message:'<textarea class="form-control" rows="3" style="resize:vertical">'+o.content+"</textarea>",type:o.type,buttons:[{label:o.okLabel,action:function(t,e){var n=e.getModalBody().find("textarea").val();_.isFunction(o.callback)&&o.callback(n),e.close()}},{label:o.cancelLabel,type:e.type.DEFAULT,action:function(t,e){e.close()}}]}).open()}}}),{TYPE:t.type,BUTTON_CATEGORY:t.buttonCategory,BUTTON_SIZE:t.buttonSize,create:t.bsModal.create,extend:t.bsModal.extend,alert:t.bsModal.alert,confirm:t.bsModal.confirm,prompt:t.bsModal.prompt,show:function(e){return t.bsModal.create(e).open()}}})});